<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.green.secondproject.teacher.subject.SubjectMapper">


<select id="subcate" resultType="SubjectVo">
    SELECT category_id,nm
    FROM sbj_category
    WHERE TYPE = 1
</select>

    <select id="subject">
        select *
        from subject
    </select>

<insert id="instcsbj">
    INSERT INTO tc_sbj
    (user_id,subject_id)
    VALUES
    (#{user_id},#{subject_id})
</insert>

    <select id="tcslist" resultType="SubjectDetailVo2">
        SELECT DISTINCT A.category_id,A.nm,C.user_id
        FROM  sbj_category A
        INNER JOIN subject B
        ON A.category_id = B.category_id
        INNER JOIN tc_sbj C
        ON B.subject_id = C.subject_id
        INNER JOIN user D
        ON C.user_id = D.user_id
        WHERE A.`type`= 1 AND C.user_id = #{user_id} and D.apr_yn = 1
    </select>
    <select id="smalllist" resultType="SubjectVo2">
        SELECT A.subject_id,A.nm,B.user_id
        FROM subject A
        INNER JOIN tc_sbj B
        ON A.subject_id= B.subject_id
        INNER JOIN user C
        ON B.user_id = C.user_id
        WHERE B.user_id = #{user_id} and C.apr_yn = 1;
    </select>
</mapper>

